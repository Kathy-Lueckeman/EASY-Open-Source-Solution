<apex:component id="applicationFormSectionComponent" allowDml="true" >
    <script>
        function makeNonEditable(){
            //Not Editable
            jQuery('.fieldNotEditable,.fieldNotEditable input,.fieldNotEditable select,.fieldNotEditable textarea').attr('disabled','disabled');
        }
        function lookupCreateOpenJS{!group.item.Id}(item){
            setCreatingNewRelatedRecordAF{!group.item.Id}(jQuery(item).closest('tr').attr('data-recid'),jQuery(item).val());
        }
        jQuery('.statePicklist').on('DOMNodeInserted',function(){
            jQuery('.statePicklist select:not(.form-control)').addClass('form-control');
            makeNonEditable();
        });
        jQuery(function(){
            makeNonEditable();
        });
    </script>
    <style>input[type="date"] {
        position: relative;
    }
    
    /* create a new arrow, because we are going to mess up the native one
    see "List of symbols" below if you want another, you could also try to add a font-awesome icon.. */
    input[type="date"]:after {
        content: "\25BC"; 
        color: #555;
        padding: 0 5px;
    }
    
    /* change color of symbol on hover */
    input[type="date"]:hover:after {
        color: #bf1400;
    }
    
    /* make the native arrow invisible and stretch it over the whole field so you can click anywhere in the input field to trigger the native datepicker*/
    input[type="date"]::-webkit-calendar-picker-indicator {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        width: auto;
        height: auto;
        color: transparent;
        background: transparent;
    }
    
    /* adjust increase/decrease button */
    input[type="date"]::-webkit-inner-spin-button {
        z-index: 1;
    }</style>
    <style>
    	label {
        	font-family: sans-serif;
        	color:#{!appControl.Text_Color__c};
        	font-weight:400;
        	font-size:18px;
        }
        
        .formControl {
        	font-family: sans-serif;
        	color:#{!appControl.Text_Color__c};
        	font-weight:400;
        	font-size:14px;
        	height:36px;
        }
    </style>
    <apex:actionFunction name="setCreatingNewRelatedRecordAF{!group.item.Id}" action="{!groupNewRelatedRecord}" rerender="theSection">
        <apex:param name="p1" assignTo="{!group.newReferenceObjectSelectedWrapper}" value=""/>
        <apex:param name="p2" assignTo="{!group.newReferenceObjectSelectedWrapperName}" value=""/>
    </apex:actionFunction>
    <apex:attribute name="group" description="The ApplicationQuestionGroup for this section" type="ApplicationQuestionGroup" required="true" />
    <apex:attribute name="preventUpdates" description="" type="Boolean" default="false" required="false" />
    <apex:attribute name="appControl" description="ApplicationSettings" type="Application_Control__c" required="true" />
    <apex:attribute name="groupNewRelatedRecord" description="" type="ApexPages.Action" required="true"/>
    <apex:attribute name="obj" description="" type="sObject" required="false"/>
    <apex:outputPanel styleClass="{!if(group.isEditable,'','fieldNotEditable')}" id="theSection">
        <!--<div class="progress">
            <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40"
                 aria-valuemin="0" aria-valuemax="100" style="width:{!group.progress}%;background-color:#{!appControl.Arrow_Color__c};">
            </div>
        </div>-->
        <apex:outputPanel rendered="{!group.instructions != null && group.instructions != ''}" >
            <p><apex:outputText value="{!group.instructions}" escape="false" /></p>
            <br />
        </apex:outputPanel>
        <apex:outputPanel rendered="{!group.isInternal && (group.response != null && group.response.Fulfilled_On__c != null)}" >
            <p>
                <apex:outputText value="Completed on {0, Date}.">
					<apex:param value="{!group.response.Fulfilled_On__c}" />
				</apex:outputText>
            </p>
            <br />
        </apex:outputPanel>
        <apex:outputPanel rendered="{!group.isInternal && (group.response == null || group.response.Fulfilled_On__c == null)}" >
            <p>This has not been completed.</p>
            <br />
        </apex:outputPanel>
        <apex:outputPanel id="questionGroupWrapper" >
        <apex:outputPanel id="questionGroup" rendered="{!group.questionGroup && !group.isInternal}" >
            <apex:actionFunction name="sendTheReminder" action="{!group.sendReminder}" reRender="none" />
            <apex:actionRegion >
            <apex:repeat value="{!group.questions}" var="question" >
               <div class="row" >
                    <div class="col-xs-12">
                        <apex:outputPanel rendered="{!question.showQuestion}" >
                            <apex:outputPanel rendered="{!question.fieldType == 'Address'}" >
                        <style>
                            .statePicklist select {
                                font-family: 'Open Sans', sans-serif;
                                color: {!appControl.Text_Color__c};
                                font-weight: 400;
                                font-size: 14px;
                                display: block;
                                height: 34px;
                                padding: 6px 12px;
                                line-height: 1.42857143;
                                background-color: #fff;
                                background-image: none;
                                border: 1px solid #ccc;
                                border-radius: 4px;
                                -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
                                box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
                                -webkit-transition: border-color ease-in-out .15s, -webkit-box-shadow ease-in-out .15s;
                                transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
                            }
                        </style>
                        <div class="form-group" >
                                <label for="street" >{!question.label} Street{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                <apex:inputField id="street" value="{!question.response.Street__c}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;resize:none;"/>
                            </div>

                            <div class="form-group" >
                                <label for="city" >{!question.label} City{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                <apex:inputField id="city" value="{!question.response.City__c}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;"/>
                            </div>
                                <apex:outputPanel rendered="{!!question.stateAndCountryPicklistEnabled}" >
                                <div class="form-group" >
                                    <label for="state" >{!question.label} State/Province{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                    <div class="statePicklist {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" >
                                        <apex:inputField id="state" value="{!question.response.State__c}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;" />
                                    </div>
                                </div>
                            </apex:outputPanel>
                                <div class="form-group" >
                                <label for="country" >{!question.label} Country{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                <apex:inputField id="country" value="{!question.response.Country__c}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;"/>
                            </div>

                            <apex:outputPanel rendered="{!question.stateAndCountryPicklistEnabled}" >
                                <div class="form-group" >
                                    <label for="statePicklist" >{!question.label} State/Province{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                    <div class="statePicklist {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" >
                                        <apex:inputField id="statePicklist" value="{!question.con[IF(question.stateAndCountryPicklistEnabled,'MailingStateCode','MailingState')]}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;" />
                                    </div>
                                </div>
                            </apex:outputPanel>

                            <div class="form-group" >
                                <label for="postal" >{!question.label} Postal Code{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                <apex:inputField id="postal" value="{!question.response.PostalCode__c}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;"/>
                            </div>
                        </apex:outputPanel>
                        <apex:outputPanel >
                            <script>
                                jQuery('.statePicklist').unbind('DOMNodeInserted').on('DOMNodeInserted',function(){
                                    jQuery('.statePicklist select:not(.form-control)').addClass('form-control');
                                    makeNonEditable();
                                });
                            </script>
                        </apex:outputPanel>
                    <apex:outputPanel rendered="{!question.fieldType == 'Checkbox'}" >
                    <div class="checkbox" >
                        <label for="field" >
                            <apex:inputCheckbox id="checkBoxField" onchange="reRenderAllGroups();" value="{!question.response.ValueCheckbox__c}" styleClass="{!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" />
                            {!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}
                        </label>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
               <apex:outputPanel rendered="{!question.fieldType == 'Currency'}" >
               <script>
                var jq = jQuery.noConflict();
                jq(document).ready(function(){
                    jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', '100.00', question.placeholder)}');
                });
               </script>
                    <div class="form-group" >
                        <label for="CurrencyField" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <div class="input-group" >
                            <span class="input-group-addon"><i class="glyphicon glyphicon-usd"></i></span>
                            <apex:inputField id="CurrencyField" value="{!question.response.ValueCurrency__c}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" rendered="{!question.response != null}"/>
                        </div>                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Date'}" >
                    <style type="text/css" >
                    .dateFormat {
                        visibility:hidden;
                        font-size: 0px;
                    }
                    </style>
                    <div class="form-group" >
                        <label for="DateField" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <div class="input-group" >
                            
                            <apex:input id="DateField" type="auto" value="{!question.dateValue}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                            <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'DateTime'}" >
                    <div class="form-group" >
                        <label for="dateTimeField" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <div class="input-group" >
                            <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
                            <apex:input id="dateTimeField" type="auto" value="{!question.datetimeValue}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                    <script>
                    var jq = jQuery.noConflict();
                    jq(document).ready(function(){
                        jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', 'MM/DD/YYYY 12:00 PM', question.placeholder)}');
                    });
                   </script>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Decimal' || question.fieldType == 'Integer' || question.fieldType == 'Number'}" >
                	<script>
                    	var jq = jQuery.noConflict();
                    	jq(document).ready(function() {
                            // Riley Schill 7/29/2020 DHD-3555 
                            jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', '', question.placeholder)}');
                    	});
                   </script>
                    <div class="form-group" >
                        <label for="numberField" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:inputField id="numberField" value="{!question.response.ValueNumber__c}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Email'}" >
                    <script>
                    	var jq = jQuery.noConflict();
                    	jq(document).ready(function() {
                        	jq('.{!question.question.Id}').prop('placeholder','{!IF(question.placeholder == null || question.placeholder == '', 'name@example.com', question.placeholder)}');
                    	});
                   </script>
                    <div class="form-group" >
                        <label for="field" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <div class="input-group" >
                            <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                            <apex:inputField id="field" value="{!question.response.ValueEmail__c}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                            <apex:commandLink styleClass="btn-lightning" style="width:1%;display:table-cell;color:#{!appControl.Button_Text_Color__c};background-color:#{!appControl.Button_Color__c};" value="Send Reminder" onclick="appShowLoadingSpinner();sendTheReminder();" oncomplete="appHideLoadingSpinner();" reRender="none" rendered="{!!preventUpdates && question.isEditable && question.question.External_Email_Field__c == true}"/>
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'TextEncrypted'}" >
                    <script>
                        var jq = jQuery.noConflict();
                        jq(document).ready(function() {
                        	jq('.{!question.question.Id}').attr('placeholder','{!question.placeholder}');
                        });
                   </script>
                    <div class="form-group" >
                        <label for="textEncryptedField" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:inputSecret redisplay="true" id="textEncryptedField" value="{!question.textEncryptedValue}" maxlength="{!if(question.length == null || question.length > 175, 175, question.length)}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#676767;font-weight:400;font-size:14px;height:36px;"/>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'MultiPicklist'}" >
                    <style>
                        .selectCheckboxes label {
                            margin-left:10px;
                            font-weight:400;
                        }
                    </style>

                    <div class="form-group" >
                        <label for="multiPicklistField" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:selectCheckboxes id="multiPicklistField" onchange="reRenderAllGroups();" value="{!question.multiPicklistValues}" layout="pageDirection" styleClass="selectCheckboxes {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;" >
                            <apex:selectOptions value="{!question.options}" />
                        </apex:selectCheckboxes>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Percent'}" >
                    <script>
                    var jq = jQuery.noConflict();
                    jq(document).ready(function(){
                        jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', '99.00', question.placeholder)}');
                    });
                   </script>
                    <div class="form-group" >
                        <label for="percentField" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <div class="input-group" >
                            <span class="input-group-addon">%</span>
                            <apex:inputField id="percentField" value="{!question.response.ValuePercent__c}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Phone'}" >
                    <script>
                        var jq = jQuery.noConflict();
                        jq(document).ready(function(){
                        jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', '(123) 456-7890', question.placeholder)}');
                        });
                    </script>
                    <div class="form-group" >
                        <label for="phoneField" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <div class="input-group" >
                            <span class="input-group-addon"><i class="glyphicon glyphicon-earphone"></i></span>
                            <apex:inputField id="phoneField" value="{!question.response.ValuePhone__c}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Picklist' && !question.radio}" >
                    <div class="form-group" >
                        <label for="picklistField" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:selectList id="picklistField" onchange="reRenderAllGroups();" value="{!question.response.ValueText__c}" size="1" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" >
                            <apex:selectOptions value="{!question.options}" />
                        </apex:selectList>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!(question.fieldType == 'Picklist' && question.radio) || question.fieldType == 'Radio'}" >
                    <style>
                        .selectRadio label {
                            margin-left:10px;
                            font-weight:400;
                            display:inline;
                        }
                        .selectRadio td {
                            padding-left:10px;
                            padding-bottom:10px;
                        }
                    </style>

                    <div class="form-group" >
                        <label for="radioField" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:selectRadio id="radioField" onchange="reRenderAllGroups();" value="{!question.response.ValueText__c}" layout="pageDirection" styleClass="selectRadio {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" >
                            <apex:selectOptions value="{!question.options}" />
                        </apex:selectRadio>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Reference'}" >
                    <div class="form-group" >
                        <label for="referenceField" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:selectList id="referenceField" value="{!question.response.ValueText__c}" size="1" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" >
                            <apex:selectOptions value="{!question.options}" />
                            <apex:actionSupport event="onchange" reRender="questionGroup" />
                        </apex:selectList>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Static'}" >
                    <div class="form-group" >
                        <label for="field" rendered="{!NOT(ISBLANK(question.label))}">{!question.label}</label>
                        <p><apex:outputText value="{!question.question.Static_Text__c}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                 <apex:outputPanel rendered="{!question.fieldType == 'Text'}" >
                     <script>
                        var jq = jQuery.noConflict();
                        jq(document).ready(function(){
                            jq('.{!question.question.Id}').attr('placeholder','{!question.placeholder}');
                            jq('.{!question.question.Id}').attr('maxlength','{!if(question.length == null || question.length > 255, 255, question.length)}');
                        });
                    </script>
                    <div class="form-group" >
                        <label for="textField" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:inputField id="textField" value="{!question.response.ValueText__c}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'TextArea'}" >
                    <script>
                        var jq = jQuery.noConflict();
                        jq(document).ready(function(){
                            jq('.{!question.question.Id}').attr('placeholder','{!question.placeholder}');
                            jq('.{!question.question.Id}').attr('maxlength','{!if(question.length == null || question.length > 255, 255, question.length)}');
                        });
                    </script>
                    <div class="form-group" >
                        <label for="textAreaField" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:inputField id="textAreaField" value="{!question.response.ValueTextArea__c}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;resize:none;" />
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'LongTextArea'}" >
                    <script>
                        var jq = jQuery.noConflict();
                        jq(document).ready(function(){
                            jq('.{!question.question.Id}').attr('placeholder','{!question.placeholder}');
                            jq('.{!question.question.Id}').attr('maxlength','{!if(question.length == null || question.length > 32768, 32768, question.length)}');
                        });
                    </script>
                    <div class="form-group" >
                        <label for="longTextAreaField" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:inputField id="longTextAreaField" value="{!question.response.ValueLongTextArea__c}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;resize:none;" />
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                 <apex:outputPanel rendered="{!question.fieldType == 'URL'}" >
                         <script>
                            var jq = jQuery.noConflict();
                            jq(document).ready(function(){
                                jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', 'www.example.com', question.placeholder)}');
                            });
                        </script>
                        <div class="form-group" >
                            <label for="urlField" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                            <apex:inputField id="urlField" value="{!question.response.ValueURL__c}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                                <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                     	</div>
                    </apex:outputPanel>
                    </apex:outputPanel>
                    </div>
                </div>
            </apex:repeat>
            <apex:outputPanel >
                <script>
                    jQuery(function(){
                        makeNonEditable();
                    });
                </script>
            </apex:outputPanel>
            </apex:actionRegion>
        </apex:outputPanel>
        </apex:outputPanel>
        <apex:outputPanel rendered="{!group.documentUpload && !group.isInternal}" >
            <apex:inputTExtArea styleClass="ckeditor" value="{!group.response.ValueTextEntry__c}" rendered="{!group.item.Allow_Text_Entry__c && !preventUpdates}"/>
            <apex:outputField value="{!group.response.ValueTextEntry__c}" rendered="{!group.item.Allow_Text_Entry__c && (preventUpdates || !group.isEditable)}"/>
            
            <apex:outputText style="font-weight:bold" value="Previously Uploaded Document: " rendered="{!!preventUpdates && group.isEditable}"/>            
    <apex:repeat value="{!group.oldAttVersionList}" var="doc" id="theRepeat">
        <br/>  
    <apex:outputLink value="/sfc/servlet.shepherd/version/download/{!doc.Id}" target="_blank">{!doc.Title}</apex:outputLink>
</apex:repeat>

            <br/><br/>
            <apex:outputPanel rendered="{!!preventUpdates && group.isEditable}">
                <input class='docUploadInput' data-respid="{!group.item.Id}" type="file"/>
            </apex:outputPanel>
        </apex:outputPanel>
        <apex:outputPanel rendered="{!group.relatedObject && !group.isInternal}" >
            <style>
                table tr {
                    border: none;
                    display: block;
                }
    
                table td {
                    display: block;
                    border: none;
                }
    
                table td::before {
                    content: attr(data-label);
                    float: left;
                    width: 100%;
                    margin-right: 10px;
                	font-family:'Open Sans', sans-serif;
                    color:#{!appControl.Text_Color__c};
                    font-weight:400;
                    font-size:18px;
                }
            </style>
    <div class="container-fluid" >
        <div class="row" >
            <div class="col-lg-12" style="border-bottom: 2px solid #ddd" >
                <h2 style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:24px;" >{!IF(ISBLANK(group.item.Label__c), group.item.Name, group.item.Label__c)}</h2>
            </div>
        </div>
        <div class="row" >
        <div class="col-lg-12" >
        <apex:outputPanel id="theTable" rendered="{!group.creatingNewRelatedRecord == false}">
            <apex:pageMessages />
            <apex:outputPanel rendered="{!group.relatedObjects.size == 0}" >
                You haven't created any records yet. Click "New Record" to create one.<br /><br />
            </apex:outputPanel>
            <apex:outputPanel rendered="{!CONTAINS(group.item.Required__c, group.app.Application_Status__c) && group.item.Required_Number_of_Children__c != null && group.item.Required_Number_of_Children__c > 0}" >
                At least {!group.item.Required_Number_of_Children__c} record{!IF(group.item.Required_Number_of_Children__c > 1, 's are', ' is')} required.<br /><br />
            </apex:outputPanel>
            <apex:outputPanel rendered="{!group.relatedObjects.size > 0}" >
            <table class="table">
                <tbody>
                    <apex:repeat value="{!group.relatedObjects}" var="rr">
                        <tr data-recid="{!rr.idx}" style="border-top: none; border-bottom: 2px solid #ddd;" >
                            <apex:repeat value="{!group.questions}" var="question" >
                                <apex:outputPanel layout="none" rendered="{!rr.showQuestions[question]}">
                                    <td class="ui-front" style="border:none;" data-label="{!question.question.Label__c}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}" >
                                        <apex:outputPanel styleClass="appReferenceField">
                                            <apex:outputField value="{!rr.obj[IF(NOT(ISBLANK(rr.obj['Holding_Name__c'])),'Holding_Name__c',question.question.Related_Object_Field__c)]}" style="{!IF(rr.isEditMode,'display:none;','')}" rendered="{!!rr.isEditMode && question.question.Related_Object_Field__c != null && group.fieldResultMap[lower(question.question.Related_Object_Field__c)].isReference}"/>
                                        </apex:outputPanel>
                                        <apex:outputField value="{!rr.obj[question.question.Related_Object_Field__c]}" rendered="{!!rr.isEditMode && question.question.Related_Object_Field__c != null && !group.fieldResultMap[lower(question.question.Related_Object_Field__c)].isReference}"/>
                                        <div class="row" >
                    <div class="col-xs-12">
                        <apex:outputPanel id="editQuestion" rendered="{!rr.isEditMode}" >
                            <apex:outputPanel rendered="{!question.fieldType == 'Address'}" >
                        <style>
                            .statePicklist select {
                                font-family: 'Open Sans', sans-serif;
                                color: {!appControl.Text_Color__c};
                                font-weight: 400;
                                font-size: 14px;
                                display: block;
                                width: 100%;
                                height: 34px;
                                padding: 6px 12px;
                                line-height: 1.42857143;
                                background-color: #fff;
                                background-image: none;
                                border: 1px solid #ccc;
                                border-radius: 4px;
                                -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
                                box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
                                -webkit-transition: border-color ease-in-out .15s, -webkit-box-shadow ease-in-out .15s;
                                transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
                            }
                        </style>
                            <div class="form-group" >
                                <label for="street1" >{!question.label} Street{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                <apex:inputField id="street1" value="{!rr.obj[SUBSTITUTE(question.question.Related_Object_Field__c,'Address','Street')]}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;resize:none;"/>
                            </div>

                            <div class="form-group" >
                                <label for="city1" >{!question.label} City{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                <apex:inputField id="city1" value="{!rr.obj[SUBSTITUTE(question.question.Related_Object_Field__c,'Address','City')]}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;"/>
                            </div>
                                <apex:outputPanel rendered="{!!question.stateAndCountryPicklistEnabled}" >
                                <div class="form-group" >
                                    <label for="state1" >{!question.label} State{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                    <div class="statePicklist {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" >
                                        <apex:inputField id="state1" value="{!rr.obj[SUBSTITUTE(question.question.Related_Object_Field__c,'Address',IF(question.stateAndCountryPicklistEnabled,'StateCode','State'))]}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;" />
                                    </div>
                                </div>
                            </apex:outputPanel>
                                <div class="form-group" >
                                <label for="country1" >{!question.label} Country{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                <apex:inputField id="country1" value="{!rr.obj[SUBSTITUTE(question.question.Related_Object_Field__c,'Address',IF(question.stateAndCountryPicklistEnabled,'CountryCode','Country'))]}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;"/>
                            </div>

                            <apex:outputPanel rendered="{!question.stateAndCountryPicklistEnabled}" >
                                <div class="form-group" >
                                    <label for="state1Picklist" >{!question.label} State{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                    <div class="statePicklist {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" >
                                        <apex:inputField id="state1Picklist" value="{!rr.obj[SUBSTITUTE(question.question.Related_Object_Field__c,'Address',IF(question.stateAndCountryPicklistEnabled,'StateCode','State'))]}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;" />
                                    </div>
                                </div>
                            </apex:outputPanel>

                            <div class="form-group" >
                                <label for="postal1" >{!question.label} Postal Code{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                <apex:inputField id="postal1" value="{!rr.obj[SUBSTITUTE(question.question.Related_Object_Field__c,'Address','PostalCode')]}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;"/>
                            </div>
                        <apex:outputPanel >
                            <script>
                                jQuery('.statePicklist').unbind('DOMNodeInserted').on('DOMNodeInserted',function(){
                                    jQuery('.statePicklist select:not(.form-control)').addClass('form-control');
                                    makeNonEditable();
                                });
                            </script>
                        </apex:outputPanel>
                    </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Checkbox'}" >
                    <div class="checkbox" >
                        <label for="field1" >
                            <apex:inputCheckbox id="checkBoxField1" value="{!rr.obj[question.question.Related_Object_Field__c]}" styleClass="{!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}">
                                <apex:actionSupport event="onchange" reRender="theTable" />
                            </apex:inputCheckbox>
                        </label>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
               <apex:outputPanel rendered="{!question.fieldType == 'Currency'}" >
               <script>
                var jq = jQuery.noConflict();
                jq(document).ready(function(){
                    jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', '100.00', question.placeholder)}');
                });
               </script>
                    <div class="form-group" >
                        <div class="input-group" >
                            <span class="input-group-addon"><i class="glyphicon glyphicon-usd"></i></span>
                            <apex:inputField id="CurrencyField1" value="{!rr.obj[question.question.Related_Object_Field__c]}"  styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" rendered="{!NOT(ISBLANK(question.question.Related_Object_Field__c)) && NOT(ISBLANK(rr.obj))}" />
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Date'}" >
                    <style type="text/css" >
                    .dateFormat {
                        visibility:hidden;
                        font-size: 0px;
                    }
                    </style>
                    <div class="form-group" >
                        <div class="input-group" >
                           <apex:inputField id="DateField1" type="auto" value="{!rr.obj[question.question.Related_Object_Field__c]}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                           <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                            
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'DateTime'}" >
                    <div class="form-group" >
                        <div class="input-group" >
                            <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
                            <apex:inputField id="dateTimeField1" type="auto" value="{!rr.obj[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                    <script>
                    var jq = jQuery.noConflict();
                    jq(document).ready(function(){
                        jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', 'MM/DD/YYYY 12:00 PM', question.placeholder)}');
                    });
                   </script>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Decimal' || question.fieldType == 'Integer' || question.fieldType == 'Number'}" >
                    <script>
                    	var jq = jQuery.noConflict();
                    	jq(document).ready(function(){
                        	// Riley Schill 7/29/2020 DHD-3555 
                            jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', '', question.placeholder)}');
                        	jq('.{!question.question.Id}').attr('maxlength','{!question.length}');
                    	});
                   </script>
                    <div class="form-group" >
                        <apex:inputField type="auto" id="numberField1" value="{!rr.obj[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Email'}" >
                	<script>
                		var jq = jQuery.noConflict();
                		jq(document).ready(function(){
                    		jq('.{!question.question.Id}').prop('placeholder','{!IF(question.placeholder == null || question.placeholder == '', 'name@example.com', question.placeholder)}');
                		});
               		</script>
                    <div class="form-group" >
                        <div class="input-group" >
                            <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                            <apex:inputField id="field1" value="{!rr.obj[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'TextEncrypted'}" >
                    <script>
                    	var jq = jQuery.noConflict();
                    	jq(document).ready(function() {
                    		jq('.{!question.question.Id}').attr('placeholder','{!question.placeholder}');
                    	});
                   </script>
                    <div class="form-group" >
                        <apex:inputSecret redisplay="true" id="textEncryptedField1" value="{!rr.obj[question.question.Related_Object_Field__c]}" maxlength="{!if(question.length == null || question.length > 175, 175, question.length)}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#676767;font-weight:400;font-size:14px;height:36px;"/>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'MultiPicklist'}" >
                    <style>
                        .selectCheckboxes label {
                            margin-left:10px;
                            font-weight:400;
                        }
                        .selectCheckboxes tr {
                        	border-bottom: 0px;
                        }
                        .selectCheckboxes td {
                        	border-bottom: 0px;
                        }
                    </style>
                    <div class="form-group" >
                        <apex:selectCheckboxes id="multiPicklistField1" value="{!rr.multiPicklistValues[question.question.Related_Object_Field__c].multiPicklistValues}" layout="pageDirection" styleClass="selectCheckboxes {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;" >
                            <apex:selectOptions value="{!question.options}" />
                            <apex:actionSupport event="onchange" reRender="theTable" />
                        </apex:selectCheckboxes>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Percent'}" >
                	<script>
                		var jq = jQuery.noConflict();
                		jq(document).ready(function(){
                    		jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', '99.00', question.placeholder)}');
                		});
               		</script>
                    <div class="form-group" >
                        <div class="input-group" >
                            <span class="input-group-addon">%</span>
                            <apex:inputField id="percentField1" value="{!rr.obj[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Phone'}" >
                    <script>
                        var jq = jQuery.noConflict();
                        jq(document).ready(function() {
                        jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', '(123) 456-7890', question.placeholder)}');
                        });
                    </script>
                    <div class="form-group" >
                        <div class="input-group" >
                            <span class="input-group-addon"><i class="glyphicon glyphicon-earphone"></i></span>
                            <apex:inputField id="phoneField1" value="{!rr.obj[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Picklist' && !question.radio}" >
                    <div class="form-group" >
                        <apex:selectList id="picklistField1" value="{!rr.obj[question.question.Related_Object_Field__c]}" size="1" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" >
                            <apex:selectOptions value="{!question.options}" />
                            <apex:actionSupport event="onchange" reRender="theTable" />
                        </apex:selectList>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!(question.fieldType == 'Picklist' && question.radio) || question.fieldType == 'Radio'}" >
                    <style>
                        .selectRadio label {
                            margin-left:10px;
                            font-weight:400;
                            display:inline;
                        }
                        .selectRadio td {
                            padding-left:10px;
                            padding-bottom:10px;
                        }
                    </style>
                    <div class="form-group" >
                        <apex:selectRadio id="radioField1" value="{!rr.obj[question.question.Related_Object_Field__c]}" layout="pageDirection" styleClass="selectRadio {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" >
                            <apex:selectOptions value="{!question.options}" />
                            <apex:actionSupport event="onchange" reRender="theTable" />
                        </apex:selectRadio>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Reference'}" >
                    <div class="form-group" >
                        <apex:outputPanel rendered="{!question.question.New_Reference_Field__c == false}">
                            <input data-objtype="{!question.question.Lookup_Object__c}" data-objtypefilter="{!question.question.Lookup_Where_Clause__c}" data-objtypenamefield="{!question.question.Name_Field_API_Name__c}" placeholder="{!question.placeholder}" class="form-control bind-autocomplete" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                            <apex:inputHidden html-class="inputHidden" value="{!rr.obj[question.question.Related_Object_Field__c]}"/>
                            <apex:outputPanel styleClass="lookupPanel" style="display:none">
                                <apex:outputField value="{!rr.obj[IF(AND(question.question.New_Reference_Field__c == false,NOT(ISBLANK(rr.obj['Holding_Name__c']))),'Holding_Name__c',question.question.Related_Object_Field__c)]}" />
                            </apex:outputPanel>
                        </apex:outputPanel>
                        <apex:inputField value="{!rr.obj[question.question.Related_Object_Field__c]}" styleClass="form-control" rendered="{!question.question.New_Reference_Field__c == true}"/>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Static'}" >
                    <div class="form-group" >
                        <label for="field" rendered="{!NOT(ISBLANK(question.label))}">{!question.label}</label>
                        <p><apex:outputText value="{!question.question.Static_Text__c}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Text'}" >
                    <script>
                    	var jq = jQuery.noConflict();
                    	jq(document).ready(function() {
                        	jq('.{!question.question.Id}').attr('placeholder','{!question.placeholder}');
                        	jq('.{!question.question.Id}').attr('maxlength','{!if(question.length == null || question.length > 255, 255, question.length)}');
                    	});
                    </script>
                    <div class="form-group" >
                        <apex:inputField type="auto" id="textField1" value="{!rr.obj[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'TextArea'}" >
                    <script>
                        var jq = jQuery.noConflict();
                        jq(document).ready(function() {
                            jq('.{!question.question.Id}').attr('placeholder','{!question.placeholder}');
                            jq('.{!question.question.Id}').attr('maxlength','{!if(question.length == null || question.length > 255, 255, question.length)}');
                        });
                    </script>
                    <div class="form-group" >
                        <apex:inputField id="textAreaField1" value="{!rr.obj[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;resize:none;" />
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'LongTextArea'}" >
                    <script>
                        var jq = jQuery.noConflict();
                        jq(document).ready(function() {
                            jq('.{!question.question.Id}').attr('placeholder','{!question.placeholder}');
                            jq('.{!question.question.Id}').attr('maxlength','{!if(question.length == null || question.length > 32768, 32768, question.length)}');
                        });
                    </script>
                    <div class="form-group" >
                        <apex:inputField id="longTextAreaField1" value="{!rr.obj[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;resize:none;" />
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'URL'}" >
                    <script>
                        var jq = jQuery.noConflict();
                        jq(document).ready(function() {
                            jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', 'www.example.com', question.placeholder)}');
                        });
                    </script>
                    <div class="form-group" >
                        <apex:inputField id="urlField1" value="{!rr.obj[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
            </apex:outputPanel>
            </div>
            </div>
            </td>
            </apex:outputPanel>
            </apex:repeat>
            <!-- for now we hide this section as it wont re-render after an upload-->
                            <apex:outputPanel layout="none" rendered="{ false && !ISPICKVAL($User.UserType,'Standard') || group.item.Allow_Supporting_Documentation_Upload__c}">
                                <td class="ui-front">
                                    <apex:outputLink value="/{!rr.att.ContentDocumentId}" rendered="{!rr.att != null && ISPICKVAL($User.UserType,'Standard')}" target="_blank">View Uploaded Document
                                    </apex:outputLink>
                                    <apex:outputText value="Previously Uploaded Documents:" rendered="{!rr.att != null && NOT(ISPICKVAL($User.UserType,'Standard'))}" />
                                    <apex:repeat value="{!rr.AttList}" var="doc"  id="theRepeat">
                                            <br/>  
                                        <apex:outputLink value="/sfc/servlet.shepherd/version/download/{!doc.ContentDocument.Id}" 
                                        rendered="{!doc != null && NOT(ISPICKVAL($User.UserType,'Standard'))}"
                                        target="_blank">{!doc.ContentDocument.Title}</apex:outputLink>
                                        </apex:repeat>
                                </td>
                            </apex:outputPanel>
                            <apex:outputPanel layout="none" rendered="{!(ISPICKVAL($User.UserType,'Standard') || group.item.Allow_Supporting_Documentation_Upload__c) && !rr.isEditMode && group.isEditable && !preventUpdates}">
                                <td class="ui-front">
                                    <apex:commandLink  action="{!group.RelatedUpload}" reRender="theTable" oncomplete="if('{!group.selectedRelatedId}')window.open('{!$Page.RelatedDocumentUpload+'?Id='+group.selectedRelatedId}','_blank');">Manage Supporting Documentation
                                        <apex:param name="p1" value="{!rr.idx}" assignTo="{!group.selectedRelatedId}"/>
                                    </apex:commandLink>
                                </td>
                            </apex:outputPanel>
                        </tr>
                        <tr data-recid="{!rr.idx}" style="border-top: none; border-bottom: 2px solid #ddd;" >
                            
                                <td style=" font-weight: bold; font-size: medium;border-top: none; border-bottom: 1px solid #ddd;" >
                                    <apex:outputPanel layout="none" rendered="{!rr.obj['User_Created__c'] && !rr.isEditMode && !preventUpdates && group.isEditable}">
                                        <apex:commandLink styleClass="btn" style="background-color:lightgray;  color:#{!appControl.Button_Color__c};   font-weight: bold; font-size: medium;" action="{!group.enableEditMode}" reRender="theTable" value="Edit">
                                            <apex:param name="p1" value="{!rr.idx}" assignTo="{!group.selectedRelatedId}"/>
                                        </apex:commandLink>&nbsp;|&nbsp;
                                        <apex:commandLink styleClass="btn" style="background-color:lightgray; color:#{!appControl.Button_Color__c};    font-weight: bold; font-size: medium;" action="{!group.enableDeleteMode}"  reRender="theTable" value="Delete">
                                            <apex:param name="p1" value="{!rr.idx}" assignTo="{!group.selectedRelatedId}"/>
                                        </apex:commandLink>
                                    </apex:outputPanel>
                                    <apex:outputPanel layout="none" rendered="{!rr.obj['User_Created__c'] && rr.isEditMode}">
                                        <apex:commandLink styleClass="btn" style="background-color:lightgray;  color:#{!appControl.Button_Color__c};  font-weight: bold; font-size: medium;" action="{!group.enableConfirmMode}" reRender="theTable" value="Save">
                                            <apex:param name="p1" value="{!rr.idx}" assignTo="{!group.selectedRelatedId}"/>
                                        </apex:commandLink>&nbsp;|&nbsp;
                                        <apex:commandLink styleClass="btn" style="background-color:lightgray; color:#{!appControl.Button_Color__c};    font-weight: bold; font-size: medium;" action="{!group.enableViewMode}" reRender="theTable" value="Delete">
                                            <apex:param name="p1" value="{!rr.idx}" assignTo="{!group.selectedRelatedId}"/>
                                        </apex:commandLink>
                                    </apex:outputPanel>
                                </td>
                            
                            </tr>
                    </apex:repeat>
                    
                </tbody>
            </table>
        	</apex:outputPanel>
            <div class="col-lg-8 col-md-10 col-xs-12" >
                <apex:commandLink styleClass="btn" style="color:#{!appControl.Button_Text_Color__c};background-color:#{!appControl.Button_Color__c};" value="Add {!IF(ISBLANK(group.item.Label__c), group.item.Name, group.item.Label__c)}" action="{!group.newRow}" reRender="theTable" rendered="{!!preventUpdates && group.isEditable && (group.item.Maximum_Number_of_Children__c == null || group.relatedObjects.size < group.item.Maximum_Number_of_Children__c)}"/>
            </div>
            <apex:outputPanel >
            <script>
                jQuery(function(){
                    jQuery('.appReferenceField').find('[id^=lookup]').each(function(idx,lookup){
                        var lookupJQ = jQuery(lookup);
                        lookupJQ.closest('td').html(lookupJQ.html());
                    });
                    jQuery('.bind-autocomplete').each(function(idx,autocompleteItem){
                        var objType = jQuery(autocompleteItem).attr('data-objtype');
                        var objTypeFilter = jQuery(autocompleteItem).attr('data-objtypefilter');
                        var objTypeNameField = jQuery(autocompleteItem).attr('data-objtypenamefield');
                        if(!objTypeNameField){
                            objTypeNameField = "Name";
                        }
                        jQuery(autocompleteItem).autocomplete({
                            delay:300,
                            minLength:3,
                            source: function(request, response){lookupSearchJS(objType,objTypeFilter,objTypeNameField,request.term,function(results){
                                var retResults = jQuery.map(results, function(item){
                                    return {
                                        label: item[objTypeNameField],
                                        value: item.Id
                                    }
                                });
                                retResults.push({label:"Create as New",value:'**createnew**'});
                                response(retResults);
                            })},
                            open: function(event, ui){
                                var carHeight = jQuery(this).closest('.carousel-inner').height();
                                var uiDrop = jQuery(this).closest('.ui-front').find('ul.ui-front');
                                var uiDropPos = uiDrop.position().top;
                                uiDrop.css('max-height',(carHeight-uiDropPos)+'px');
                            },
                            select: function( event, ui ) {
                                if(ui.item.value == '**createnew**'){
                                    lookupCreateOpenJS{!group.item.Id}(jQuery(autocompleteItem));
                                }else{
                                    jQuery(autocompleteItem).val(ui.item.label);
                                    jQuery(autocompleteItem).closest('.form-group').find('.inputHidden').val(ui.item.value);
                                }
                                event.preventDefault();
                            },
                            focus: function( event, ui ) {
                                event.preventDefault();
                            }
                        });
                        jQuery(this).on('focus',function(){
                            jQuery(this).autocomplete("search",this.value);
                        });
                        jQuery(this).on('blur', function(){
                            if(!jQuery(this).closest('.form-group').find('.inputHidden').val()){
                                jQuery(this).addClass('ui-state-error');
                            }
                            else{
                                jQuery(this).removeClass('ui-state-error');
                            }
                        });
                    });
                    jQuery('.bind-autocomplete').each(function(item){
                        if(jQuery(this).closest('.form-group').find('.lookupPanel a').length>0){
                            jQuery(this).val(jQuery(this).closest('.form-group').find('.lookupPanel a').html())
                        }else{
                            var lookupVal = jQuery(this).closest('.form-group').find('.lookupPanel span').html();
                            if(lookupVal == jQuery('<div/>').html("&nbsp;").html()){
                                lookupVal = '';
                            }
                            console.log(lookupVal);
                            jQuery(this).val(lookupVal);
                        }
                        jQuery(this).closest('.form-group').find('.lookupPanel').remove();
                    });
                });
            </script>
            </apex:outputPanel>
        </apex:outputPanel>
         <apex:outputPanel id="newRelatedRecord" rendered="{!group.creatingNewRelatedRecord == true}">
             <apex:pageMessages />
             <apex:repeat value="{!group.relatedReferenceQuestions}" var="question" >
                <apex:outputPanel rendered="{!question.showQuestion}" >
                <div class="row" >
                    <div class="col-xs-12">
                        <apex:outputPanel rendered="{!question.showQuestion}" >
                            <apex:outputPanel rendered="{!question.fieldType == 'Address'}" >
                        <style>
                            .statePicklist select {
                                font-family: 'Open Sans', sans-serif;
                                color: {!appControl.Text_Color__c};
                                font-weight: 400;
                                font-size: 14px;
                                display: block;
                                width: 100%;
                                height: 34px;
                                padding: 6px 12px;
                                line-height: 1.42857143;
                                background-color: #fff;
                                background-image: none;
                                border: 1px solid #ccc;
                                border-radius: 4px;
                                -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
                                box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
                                -webkit-transition: border-color ease-in-out .15s, -webkit-box-shadow ease-in-out .15s;
                                transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
                            }
                        </style>
                        
                            <div class="form-group" >
                                <label for="street1" >{!question.label} Street{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                <apex:inputField id="street1" value="{!group.newReferenceObject[SUBSTITUTE(question.question.Related_Object_Field__c,'Address','Street')]}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;resize:none;"/>
                            </div>

                            <div class="form-group" >
                                <label for="city1" >{!question.label} City{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                <apex:inputField id="city1" value="{!group.newReferenceObject[SUBSTITUTE(question.question.Related_Object_Field__c,'Address','City')]}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;"/>
                            </div>
                                <apex:outputPanel rendered="{!!question.stateAndCountryPicklistEnabled}" >
                                <div class="form-group" >
                                    <label for="state1" >{!question.label} State{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                    <div class="statePicklist {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" >
                                        <apex:inputField id="state1" value="{!group.newReferenceObject[SUBSTITUTE(question.question.Related_Object_Field__c,'Address',IF(question.stateAndCountryPicklistEnabled,'StateCode','State'))]}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;" />
                                    </div>
                                </div>
                            </apex:outputPanel>
                                <div class="form-group" >
                                <label for="country1" >{!question.label} Country{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                <apex:inputField id="country1" value="{!group.newReferenceObject[SUBSTITUTE(question.question.Related_Object_Field__c,'Address',IF(question.stateAndCountryPicklistEnabled,'CountryCode','Country'))]}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;"/>
                            </div>

                            <apex:outputPanel rendered="{!question.stateAndCountryPicklistEnabled}" >
                                <div class="form-group" >
                                    <label for="state1Picklist" >{!question.label} State{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                    <div class="statePicklist {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" >
                                        <apex:inputField id="state1Picklist" value="{!group.newReferenceObject[SUBSTITUTE(question.question.Related_Object_Field__c,'Address',IF(question.stateAndCountryPicklistEnabled,'StateCode','State'))]}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;" />
                                    </div>
                                </div>
                            </apex:outputPanel>

                            <div class="form-group" >
                                <label for="postal1" >{!question.label} Postal Code{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                                <apex:inputField id="postal1" value="{!group.newReferenceObject[SUBSTITUTE(question.question.Related_Object_Field__c,'Address','PostalCode')]}" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;"/>
                            </div>
                        <apex:outputPanel >
                            <script>
                                jQuery('.statePicklist').unbind('DOMNodeInserted').on('DOMNodeInserted',function(){
                                    jQuery('.statePicklist select:not(.form-control)').addClass('form-control');
                                });
                            </script>
                        </apex:outputPanel>
                    </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Checkbox'}" >
                    <div class="checkbox" >
                        <label for="field1" >
                            <apex:inputCheckbox id="checkBoxField1" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}" styleClass="{!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}">
                                <apex:actionSupport event="onchange" reRender="newRelatedRecord" />
                            </apex:inputCheckbox>
                        </label>
                        {!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Currency'}" >
                    <script>
                    	var jq = jQuery.noConflict();
                    	jq(document).ready(function() {
                        	jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', '100.00', question.placeholder)}');
                    	});
                    </script>
                    <div class="form-group" >
                        <label for="CurrencyField" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <div class="input-group" >
                            <span class="input-group-addon"><i class="glyphicon glyphicon-usd"></i></span>
                            <apex:inputField id="CurrencyField1" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}"  styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" rendered="{!NOT(ISBLANK(question.question.Related_Object_Field__c)) && NOT(ISBLANK(group.newReferenceObject))}" />
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Date'}" >
                    <style type="text/css" >
                        .dateFormat {
                            visibility:hidden;
                            font-size: 0px;
                        }
                    </style>
                    <div class="form-group" >
                        <label for="DateField1" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <div class="input-group" >
                            
                            <apex:inputField id="DateField1" type="auto" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                            <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'DateTime'}" >
                    <div class="form-group" >
                        <label for="dateTimeField1" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <div class="input-group" >
                            <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
                            <apex:inputField id="dateTimeField1" type="auto" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                    <script>
                    var jq = jQuery.noConflict();
                    jq(document).ready(function(){
                        jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', 'MM/DD/YYYY 12:00 PM', question.placeholder)}');
                    });
                   </script>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Decimal' || question.fieldType == 'Integer' || question.fieldType == 'Number'}" >
                    <script>
                    	var jq = jQuery.noConflict();
                    	jq(document).ready(function() {
                        	// Riley Schill 7/29/2020 DHD-3555 
                            jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', '', question.placeholder)}');
                        	jq('.{!question.question.Id}').attr('maxlength','{!question.length}');
                    	});
                    </script>
                    <div class="form-group" >
                        <label for="numberField1" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:inputField type="auto" id="numberField1" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Email'}" >
                    <script>
                    	var jq = jQuery.noConflict();
                    	jq(document).ready(function() {
                        	jq('.{!question.question.Id}').prop('placeholder','{!IF(question.placeholder == null || question.placeholder == '', 'name@example.com', question.placeholder)}');
                    	});
                    </script>
                    <div class="form-group" >
                        <label for="field1" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <div class="input-group" >
                            <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                            <apex:inputField id="field1" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'TextEncrypted'}" >
                    <script>
                    	var jq = jQuery.noConflict();
                    	jq(document).ready(function() {
                        	jq('.{!question.question.Id}').attr('placeholder','{!question.placeholder}');
                    	});
                    </script>
                    <div class="form-group" >
                        <label for="textEncryptedField1" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:inputSecret redisplay="true" id="textEncryptedField1" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}" maxlength="{!if(question.length == null || question.length > 175, 175, question.length)}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#676767;font-weight:400;font-size:14px;height:36px;"/>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'MultiPicklist'}" >
                    <style>
                        .selectCheckboxes label {
                            margin-left:10px;
                            font-weight:400;
                        }
                        .selectCheckboxes tr {
                        	border-bottom:0px;
                        }
                    </style>
                    <div class="form-group" >
                        <label for="multiPicklistField1" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:selectCheckboxes id="multiPicklistField1" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}" layout="pageDirection" styleClass="selectCheckboxes {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;" >
                            <apex:selectOptions value="{!question.options}" />
                            <apex:actionSupport event="onchange" reRender="questionGroup" />
                        </apex:selectCheckboxes>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Percent'}" >
                    <script>
                    	var jq = jQuery.noConflict();
                    	jq(document).ready(function() {
                        	jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', '99.00', question.placeholder)}');
                    	});
                    </script>
                    <div class="form-group" >
                        <label for="percentField1" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <div class="input-group" >
                            <span class="input-group-addon">%</span>
                            <apex:inputField id="percentField1" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Phone'}" >
                    <script>
                        var jq = jQuery.noConflict();
                        jq(document).ready(function() {
                        	jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', '(123) 456-7890', question.placeholder)}');
                        });
                    </script>
                    <div class="form-group" >
                        <label for="phoneField1" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <div class="input-group" >
                            <span class="input-group-addon"><i class="glyphicon glyphicon-earphone"></i></span>
                            <apex:inputField id="phoneField1" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        </div>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Picklist' && !question.radio}" >
                    <div class="form-group" >
                        <label for="picklistField1" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:selectList id="picklistField1" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}" size="1" styleClass="form-control {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" >
                            <apex:selectOptions value="{!question.options}" />
                            <apex:actionSupport event="onchange" reRender="questionGroup" />
                        </apex:selectList>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!(question.fieldType == 'Picklist' && question.radio) || question.fieldType == 'Radio'}" >
                    <style>
                        .selectRadio label {
                            margin-left:10px;
                            font-weight:400;
                            display:inline;
                        }
                        .selectRadio td {
                            padding-left:10px;
                            padding-bottom:10px;
                        }
                    </style>
                    <div class="form-group" >
                        <label for="radioField1" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:selectRadio id="radioField1" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}" layout="pageDirection" styleClass="selectRadio {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" >
                            <apex:selectOptions value="{!question.options}" />
                            <apex:actionSupport event="onchange" reRender="questionGroup" />
                        </apex:selectRadio>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Reference'}" >
                    <div class="form-group" >
                        <label for="referenceField1" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:outputPanel rendered="{!question.question.New_Reference_Field__c == false}">
                            <input data-objtype="{!question.question.Lookup_Object__c}" data-objtypefilter="{!question.question.Lookup_Where_Clause__c}" data-objtypenamefield="{!question.question.Name_Field_API_Name__c}" placeholder="{!question.placeholder}" class="form-control bind-autocomplete" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                            <apex:inputHidden html-class="inputHidden" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}"/>
                            <apex:outputPanel styleClass="lookupPanel" style="display:none">
                                <apex:outputField value="{!group.newReferenceObject[IF(AND(question.question.New_Reference_Field__c == false,NOT(ISBLANK(group.newReferenceObject['Holding_Name__c']))),'Holding_Name__c',question.question.Related_Object_Field__c)]}" />
                            </apex:outputPanel>
                        </apex:outputPanel>
                        <apex:inputField value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}" styleClass="form-control" rendered="{!question.question.New_Reference_Field__c == true}"/>
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'Static'}" >
                    <div class="form-group" >
                        <label for="field" rendered="{!NOT(ISBLANK(question.label))}">{!question.label}</label>
                        <p><apex:outputText value="{!question.question.Static_Text__c}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                 <apex:outputPanel rendered="{!question.fieldType == 'Text'}" >
                     <script>
                     	var jq = jQuery.noConflict();
                     	jq(document).ready(function() {
                         	jq('.{!question.question.Id}').attr('placeholder','{!question.placeholder}');
                         	jq('.{!question.question.Id}').attr('maxlength','{!if(question.length == null || question.length > 255, 255, question.length)}');
                     	});
                     </script>
                    <div class="form-group" >
                        <label for="textField1" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:inputField type="auto" id="textField1" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'TextArea'}" >
                    <script>
                    	var jq = jQuery.noConflict();
                    	jq(document).ready(function() {
                        	jq('.{!question.question.Id}').attr('placeholder','{!question.placeholder}');
                        	jq('.{!question.question.Id}').attr('maxlength','{!if(question.length == null || question.length > 255, 255, question.length)}');
                    	});
                    </script>
                    <div class="form-group" >
                        <label for="textAreaField1" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:inputField id="textAreaField1" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;resize:none;" />
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'LongTextArea'}" >
                    <script>
                    	var jq = jQuery.noConflict();
                    	jq(document).ready(function() { 
                        	jq('.{!question.question.Id}').attr('placeholder','{!question.placeholder}');
                        	jq('.{!question.question.Id}').attr('maxlength','{!if(question.length == null || question.length > 32768, 32768, question.length)}');
                    	});
                    </script>
                    <div class="form-group" >
                        <label for="longTextAreaField1" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:inputField id="longTextAreaField1" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;resize:none;" />
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!question.fieldType == 'URL'}" >
                     <script>
                        var jq = jQuery.noConflict();
                        jq(document).ready(function() {
                            jq('.{!question.question.Id}').attr('placeholder','{!IF(question.placeholder == null || question.placeholder == '', 'www.example.com', question.placeholder)}');
                        });
                    </script>
                    <div class="form-group" >
                        <label for="urlField1" >{!question.label}{!if(CONTAINS(question.question.Required__c,question.application.Application_Status__c),'*','')}</label>
                        <apex:inputField id="urlField1" value="{!group.newReferenceObject[question.question.Related_Object_Field__c]}" styleClass="form-control {!question.question.Id} {!if(question.isEditable && group.isEditable && !preventUpdates,'','fieldNotEditable')}" style="font-family:'Open Sans', sans-serif;color:#{!appControl.Text_Color__c};font-weight:400;font-size:14px;height:36px;" />
                        <p class="help-block" style="{!IF(question.helpText != null && !ISBLANK(question.helpText), '', 'display:none;')}" ><apex:outputText value="{!question.helpText}" escape="false" /></p>
                    </div>
                </apex:outputPanel>
                </apex:outputPanel>
                </div>
                </div>
                </apex:outputPanel>
            </apex:repeat>
            <div class="row" >
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 col-xs-12" >
                    <apex:commandLink styleClass="btn btn-lg" style="float:right;color:#{!appControl.Button_Text_Color__c};background-color:#{!appControl.Button_Color__c};" action="{!group.addNewReferenceObject}" value="Create" reRender="theSection"/>
                    <apex:commandLink styleClass="btn btn-lg" style="color:#{!appControl.Button_Text_Color__c};background-color:#{!appControl.Button_Color__c};" immediate="true" value="Cancel" reRender="theSection">
                        <apex:param value="false" assignTo="{!group.creatingNewRelatedRecord}" name="p1"/>
                    </apex:commandLink>
                </div>
            </div>
        </apex:outputPanel>
    </div>
        </div></div>
        </apex:outputPanel>
    </apex:outputPanel>
</apex:component>